import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useEffect, useState } from 'react';
import { Network, Activity, Signal, Users, Zap, Globe, CheckCircle } from 'lucide-react';
import { useG3ZKP } from '../contexts/G3ZKPContext';
const NetworkStatus = () => {
    const { isInitialized, connectedPeers, networkStats, refreshNetworkStats } = useG3ZKP();
    const [refreshing, setRefreshing] = useState(false);
    useEffect(() => {
        if (isInitialized) {
            const interval = setInterval(() => {
                refreshNetworkStats();
            }, 3000);
            return () => clearInterval(interval);
        }
    }, [isInitialized, refreshNetworkStats]);
    const handleRefresh = async () => {
        setRefreshing(true);
        await refreshNetworkStats();
        setTimeout(() => setRefreshing(false), 500);
    };
    return (_jsxs("div", { className: "w-full space-y-6", children: [_jsxs("div", { className: "border-[0.5px] border-[#4caf50]/40 bg-black/40 p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsxs("h3", { className: "orbitron text-sm font-black tracking-widest text-[#00f3ff] uppercase flex items-center gap-3", children: [_jsx(Network, { size: 16, className: "text-[#4caf50]" }), "NETWORK STATUS"] }), _jsx("button", { onClick: handleRefresh, disabled: refreshing, className: "p-2 border-[0.5px] border-[#4caf50]/30 hover:border-[#00f3ff]/50 transition-all disabled:opacity-50", children: _jsx(Activity, { size: 12, className: `text-[#4caf50] ${refreshing ? 'animate-spin' : ''}` }) })] }), _jsxs("div", { className: "grid grid-cols-2 lg:grid-cols-4 gap-4", children: [_jsxs("div", { className: "border-[0.5px] border-[#4caf50]/20 bg-black/20 p-4", children: [_jsxs("div", { className: "flex items-center gap-2 mb-2", children: [_jsx(Users, { size: 12, className: "text-[#4caf50]/60" }), _jsx("span", { className: "text-[8px] uppercase tracking-widest opacity-50 font-mono", children: "Connected" })] }), _jsx("p", { className: "text-2xl font-black text-[#4caf50] font-mono", children: connectedPeers.length }), _jsx("p", { className: "text-[7px] opacity-40 mt-1 font-mono", children: "Active Peers" })] }), _jsxs("div", { className: "border-[0.5px] border-[#4caf50]/20 bg-black/20 p-4", children: [_jsxs("div", { className: "flex items-center gap-2 mb-2", children: [_jsx(Zap, { size: 12, className: "text-[#00f3ff]/60" }), _jsx("span", { className: "text-[8px] uppercase tracking-widest opacity-50 font-mono", children: "Messages" })] }), _jsx("p", { className: "text-2xl font-black text-[#00f3ff] font-mono", children: networkStats?.messagesSent || 0 }), _jsx("p", { className: "text-[7px] opacity-40 mt-1 font-mono", children: "Transmitted" })] }), _jsxs("div", { className: "border-[0.5px] border-[#4caf50]/20 bg-black/20 p-4", children: [_jsxs("div", { className: "flex items-center gap-2 mb-2", children: [_jsx(Signal, { size: 12, className: "text-[#4caf50]/60" }), _jsx("span", { className: "text-[8px] uppercase tracking-widest opacity-50 font-mono", children: "Routes" })] }), _jsx("p", { className: "text-2xl font-black text-[#4caf50] font-mono", children: networkStats?.routesCached || 0 }), _jsx("p", { className: "text-[7px] opacity-40 mt-1 font-mono", children: "Cached Routes" })] }), _jsxs("div", { className: "border-[0.5px] border-[#4caf50]/20 bg-black/20 p-4", children: [_jsxs("div", { className: "flex items-center gap-2 mb-2", children: [_jsx(Globe, { size: 12, className: "text-[#00f3ff]/60" }), _jsx("span", { className: "text-[8px] uppercase tracking-widest opacity-50 font-mono", children: "Discovery" })] }), _jsx("p", { className: "text-2xl font-black text-[#00f3ff] font-mono", children: networkStats?.peersDiscovered || 0 }), _jsx("p", { className: "text-[7px] opacity-40 mt-1 font-mono", children: "Discovered" })] })] })] }), _jsxs("div", { className: "border-[0.5px] border-[#4caf50]/40 bg-black/40 p-6", children: [_jsxs("h4", { className: "text-[10px] font-black tracking-widest text-[#00f3ff] uppercase mb-4 flex items-center gap-2", children: [_jsx(Users, { size: 12 }), "CONNECTED PEERS (", connectedPeers.length, ")"] }), connectedPeers.length === 0 ? (_jsxs("div", { className: "text-center py-8 opacity-50", children: [_jsx(Network, { size: 24, className: "mx-auto mb-3 text-[#4caf50]" }), _jsx("p", { className: "text-[9px] font-mono uppercase tracking-widest", children: "No peers connected" }), _jsx("p", { className: "text-[7px] font-mono mt-2 opacity-70", children: "Waiting for P2P discovery..." })] })) : (_jsx("div", { className: "space-y-3", children: connectedPeers.map((peer) => (_jsxs("div", { className: "border-[0.5px] border-[#4caf50]/20 bg-black/20 p-4 hover:border-[#00f3ff]/40 transition-all group", children: [_jsxs("div", { className: "flex items-start justify-between mb-3", children: [_jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "flex items-center gap-2 mb-1", children: [_jsx(CheckCircle, { size: 10, className: "text-[#4caf50]" }), _jsxs("span", { className: "text-[9px] font-mono font-black text-[#00f3ff] tracking-wider", children: ["PEER_", peer.id.substring(0, 8).toUpperCase()] })] }), _jsxs("p", { className: "text-[7px] font-mono opacity-50 break-all", children: ["ID: ", peer.id] })] }), _jsxs("div", { className: "flex items-center gap-1 px-2 py-1 bg-[#4caf50]/10 border-[0.5px] border-[#4caf50]/30", children: [_jsx(Signal, { size: 8, className: "text-[#4caf50]" }), _jsx("span", { className: "text-[7px] font-mono text-[#4caf50] font-black", children: "ONLINE" })] })] }), _jsxs("div", { className: "grid grid-cols-3 gap-3 text-[7px] font-mono", children: [_jsxs("div", { children: [_jsx("span", { className: "opacity-40 block mb-1", children: "Protocols" }), _jsx("span", { className: "text-[#4caf50]", children: peer.protocols?.length || 0 })] }), _jsxs("div", { children: [_jsx("span", { className: "opacity-40 block mb-1", children: "Addresses" }), _jsx("span", { className: "text-[#4caf50]", children: peer.addresses?.length || 0 })] }), _jsxs("div", { children: [_jsx("span", { className: "opacity-40 block mb-1", children: "Connected" }), _jsx("span", { className: "text-[#00f3ff]", children: peer.connectedAt ? new Date(peer.connectedAt).toLocaleTimeString() : 'N/A' })] })] }), peer.protocols && peer.protocols.length > 0 && (_jsxs("div", { className: "mt-3 pt-3 border-t-[0.5px] border-[#4caf50]/10", children: [_jsx("span", { className: "text-[7px] opacity-40 block mb-2", children: "Supported Protocols:" }), _jsxs("div", { className: "flex flex-wrap gap-1", children: [peer.protocols.slice(0, 5).map((protocol, idx) => (_jsx("span", { className: "text-[6px] font-mono px-2 py-1 bg-black/40 border-[0.5px] border-[#4caf50]/20 text-[#4caf50]", children: protocol }, idx))), peer.protocols.length > 5 && (_jsxs("span", { className: "text-[6px] font-mono px-2 py-1 opacity-50", children: ["+", peer.protocols.length - 5, " more"] }))] })] }))] }, peer.id))) }))] }), _jsxs("div", { className: "border-[0.5px] border-[#4caf50]/40 bg-black/40 p-6", children: [_jsx("h4", { className: "text-[10px] font-black tracking-widest text-[#00f3ff] uppercase mb-4", children: "NETWORK DETAILS" }), _jsxs("div", { className: "space-y-3 text-[8px] font-mono", children: [_jsxs("div", { className: "flex justify-between items-center p-3 bg-black/20 border-[0.5px] border-[#4caf50]/10", children: [_jsx("span", { className: "opacity-50", children: "Transport Protocol" }), _jsx("span", { className: "text-[#4caf50] font-black", children: "libp2p (TCP/WebSocket/WebRTC)" })] }), _jsxs("div", { className: "flex justify-between items-center p-3 bg-black/20 border-[0.5px] border-[#4caf50]/10", children: [_jsx("span", { className: "opacity-50", children: "Discovery Methods" }), _jsx("span", { className: "text-[#4caf50] font-black", children: "mDNS, DHT, Bootstrap, PubSub" })] }), _jsxs("div", { className: "flex justify-between items-center p-3 bg-black/20 border-[0.5px] border-[#4caf50]/10", children: [_jsx("span", { className: "opacity-50", children: "Security" }), _jsx("span", { className: "text-[#4caf50] font-black", children: "Noise Protocol (X25519+ChaCha20)" })] }), _jsxs("div", { className: "flex justify-between items-center p-3 bg-black/20 border-[0.5px] border-[#4caf50]/10", children: [_jsx("span", { className: "opacity-50", children: "Multiplexing" }), _jsx("span", { className: "text-[#4caf50] font-black", children: "Yamux Stream Multiplexer" })] }), _jsxs("div", { className: "flex justify-between items-center p-3 bg-black/20 border-[0.5px] border-[#4caf50]/10", children: [_jsx("span", { className: "opacity-50", children: "Message Routing" }), _jsx("span", { className: "text-[#4caf50] font-black", children: "Multi-hop with Route Caching" })] })] })] })] }));
};
export default NetworkStatus;
