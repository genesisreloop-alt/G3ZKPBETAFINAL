G3ZKP UI Redesign: Top-Left Control Cluster Specification

For Replit AI Implementation

1. CORRECTED UI LAYOUT: Top-Left Horizontal Cluster

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TOP-LEFT HORIZONTAL CLUSTER (Fixed, Collapsible)                        â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â‰¡      â”‚ â”‚ "Search destination..."          â”‚ â”‚  ðŸš—  ðŸšŒ  ðŸš¶     â”‚  â”‚
â”‚  â”‚ Hamburgerâ”‚ â”‚ (Auto-complete, recent, saved)  â”‚ â”‚ Car  Transit Walkâ”‚  â”‚
â”‚  â”‚ Menu     â”‚ â”‚                                  â”‚ â”‚                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                         â”‚
â”‚                           MAP VIEWPORT                                  â”‚
â”‚                             (Full Bleed)                                â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚                              MAP                                  â”‚  â”‚
â”‚  â”‚                      (Leaflet/OpenStreetMap)                      â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  BOTTOM SHEET (Google Maps Style)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Route Details / Business Info / Transit Options                   â”‚  â”‚
â”‚  â”‚ (Slides up, occupies 30-50% of screen)                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

2. BEHAVIOR STATES: Dynamic Collapsing

State 1: Idle (No Active Navigation)

```
[â‰¡] [Search destination..._____________________] [ðŸš— ðŸšŒ ðŸš¶]
```

Â· Full width search bar (60% of top-left cluster)
Â· All three transport buttons visible
Â· Hamburger menu visible

State 2: Active Navigation

```
[â‰¡] [â†“ To: Destination] [ðŸš—]
```

Â· Search bar collapses to show only destination name
Â· Only active transport mode shown
Â· Becomes 50% narrower than idle state

State 3: Searching

```
[â‰¡] [Searching...] [ðŸš— ðŸšŒ ðŸš¶]
```

Â· Search bar maintains full width
Â· Shows search results in dropdown below
Â· Transport buttons remain visible but non-interactive during search

3. COMPONENT ARCHITECTURE

3.1 Create New Component: TopLeftControlCluster.tsx

Location: g3zkp-messenger/src/components/navigation/TopLeftControlCluster.tsx

```typescript
interface TopLeftControlClusterProps {
  isNavigating: boolean;
  destination?: string;
  activeTransportMode: 'car' | 'transit' | 'walk';
  onMenuClick: () => void;
  onSearchFocus: () => void;
  onTransportModeChange: (mode: 'car' | 'transit' | 'walk') => void;
}

// Behavior:
// - When isNavigating = false: Show full search bar with placeholder
// - When isNavigating = true: Show collapsed destination display
// - Transport buttons highlight active mode
// - Smooth width transition between states
```

3.2 Update NavigatorMap.tsx Structure

```typescript
// Updated NavigatorMap.tsx structure:
const NavigatorMap = () => {
  return (
    <div className="relative w-full h-screen">
      {/* TOP-LEFT CLUSTER */}
      <TopLeftControlCluster
        isNavigating={navigationStore.isNavigating}
        destination={navigationStore.destination?.name}
        activeTransportMode={navigationStore.transportMode}
        onMenuClick={() => setShowMenu(true)}
        onSearchFocus={() => setSearchActive(true)}
        onTransportModeChange={(mode) => navigationStore.setTransportMode(mode)}
      />
      
      {/* MAP VIEWPORT - Takes remaining space */}
      <MapViewport />
      
      {/* BOTTOM SHEET */}
      <BottomSheetPanel />
    </div>
  );
};
```

3.3 Create State Management for Collapsing

Update: g3zkp-messenger/src/stores/navigationStore.ts

```typescript
interface NavigationStore {
  isNavigating: boolean;
  transportMode: 'car' | 'transit' | 'walk';
  destination: { name: string; coordinates: [number, number] } | null;
  searchActive: boolean;
  // New actions:
  startNavigation: (destination: string, mode: 'car' | 'transit' | 'walk') => void;
  endNavigation: () => void;
  setSearchActive: (active: boolean) => void;
  // ...existing actions
}
```

4. SPECIFIC IMPLEMENTATION INSTRUCTIONS FOR REPLIT AI

4.1 Step 1: Project Rename

Â· Replace ALL instances of "g3tzkp" with "g3zkp"
Â· Update repository name and all file references
Â· Update package.json name field

4.2 Step 2: Create TopLeftControlCluster Component

Create a new file with:

1. Horizontal flex container (flex-row)
2. Three children:
   Â· Hamburger button (fixed width)
   Â· Search/destination display (flex-grow, variable width)
   Â· Transport mode buttons (fixed width)
3. Conditional styling based on isNavigating prop
4. Smooth CSS transitions for width changes

4.3 Step 3: Update NavigatorMap.tsx

1. Remove existing top bar components
2. Import and use TopLeftControlCluster
3. Pass necessary state and callbacks from navigationStore

4.4 Step 4: Update Navigation Store

1. Add isNavigating state
2. Add actions to toggle navigation state
3. Ensure transport mode selection updates UI

4.5 Step 5: CSS/Styling

1. Ensure top-left cluster uses fixed positioning
2. Add z-index to appear above map
3. Add backdrop blur for glass morphism effect
4. Ensure dark theme compatibility

5. VISUAL SPECIFICATIONS

5.1 Dimensions

Â· Height: 60px
Â· Idle Width: 70% of viewport width (max 600px)
Â· Navigating Width: 50% of viewport width (max 400px)
Â· Margin: 20px from top, 20px from left

5.2 Colors (Dark Theme)

Â· Background: rgba(15, 23, 42, 0.9) // slate-900 with 90% opacity
Â· Border: 1px solid rgba(148, 163, 184, 0.2) // slate-400
Â· Text: rgb(226, 232, 240) // slate-200
Â· Active Transport Button: rgb(94, 234, 212) // teal-300

5.3 Animations

Â· Width Transition: 300ms ease-in-out
Â· Opacity Transition: 150ms ease-in-out
Â· Slide-in (Bottom Sheet): 400ms cubic-bezier(0.4, 0, 0.2, 1)

6. TESTING REQUIREMENTS

6.1 Functional Tests

1. Click hamburger â†’ opens navigation drawer
2. Click search â†’ expands, shows recent searches
3. Select transport mode â†’ button highlights, map updates
4. Start navigation â†’ cluster collapses appropriately
5. End navigation â†’ returns to idle state

6.2 Visual Tests

1. Cluster stays top-left on all screen sizes
2. Smooth transitions between states
3. Proper z-index layering (above map, below modals)
4. Dark theme consistency

7. INTEGRATION POINTS

7.1 Existing Components to Update

1. WazeLikeSearch.tsx â†’ Integrate into search bar dropdown
2. TransitPlanner.tsx â†’ Show in bottom sheet when transit mode selected
3. RouteInfo.tsx â†’ Show in bottom sheet during navigation
4. BusinessList.tsx â†’ Show in search results dropdown

7.2 Business Layer Integration

Â· Business search appears in dropdown
Â· Selecting a business shows FlowerOfLife19 marker on map
Â· Business details appear in bottom sheet

8. DELIVERABLES FOR REPLIT AI

1. Updated NavigatorMap.tsx with top-left cluster
2. New TopLeftControlCluster.tsx component
3. Updated navigationStore.ts with navigation state
4. Updated CSS/Tailwind styles for new layout
5. Updated integration with existing search and business components

9. SUCCESS CRITERIA

1. 1:1 Google Maps positioning (top-left)
2. Smooth collapsing/expanding behavior
3. Zero breaking changes to existing functionality
4. All transport modes functional
5. Search works for destinations, businesses, and transit stops
6. Bottom sheet shows appropriate content based on context

---

IMPLEMENTATION NOTE FOR REPLIT AI:
You have full context of the existing codebase. Use the current components (WazeLikeSearch, TransitPlanner, etc.) and integrate them into this new top-left cluster architecture. The goal is zero cognitive friction for users transitioning from Google Maps. Maintain all existing encryption, ZKP, and privacy featuresâ€”this is purely a UI/UX restructuring.